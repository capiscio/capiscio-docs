# CapiscIO Documentation Verification Tracker

**Created:** 2025-12-01  
**Purpose:** Track verification status of all product documentation against actual source code.

---

## Verification Status Legend

| Symbol | Meaning |
|--------|---------|
| âœ… | Verified against source code |
| âš ï¸ | Exists but needs verification |
| ðŸ”´ | Missing or broken |
| ðŸ”„ | In progress |

---

## Product Inventory

| Product | Location | Purpose | Docs Status |
|---------|----------|---------|-------------|
| **capiscio-sdk-python** | `/capiscio-sdk-python/` | Python SDK for runtime security | âœ… VERIFIED (28 tests pass) |
| **capiscio-core** | `/capiscio-core/` | Go CLI - the core engine | âœ… VERIFIED |
| **capiscio-node** | `/capiscio-node/` | npm wrapper for capiscio-core | âœ… VERIFIED (CLI wrapper only) |
| **capiscio-python** | `/capiscio-python/` | pip wrapper for capiscio-core | âœ… VERIFIED |
| **validate-a2a** | `/validate-a2a/` | GitHub Action for CI/CD | âœ… VERIFIED (6 inputs, 7 outputs) |

---

## capiscio-sdk-python (COMPLETE âœ…)

### Verification Method
- Created `/tests/test_docs_examples.py` with 28 tests
- All tests pass against actual SDK

### Verified Components

| Component | File | Tests | Status |
|-----------|------|-------|--------|
| SimpleGuard | `simple_guard.py` | 15 | âœ… |
| Error classes | `errors.py` | 4 | âœ… |
| SecurityConfig | `config.py` | 4 | âœ… |
| CapiscioMiddleware | `integrations/fastapi.py` | 1 | âœ… |
| Import patterns | `__init__.py` | 7 | âœ… |

### Fixed Issues (Session 2025-12-01)
- âŒ Removed fabricated `private_key_path` parameter
- âŒ Removed fabricated `trust_store_path` parameter  
- âŒ Removed fabricated `get_public_key_jwk()` method
- âŒ Removed fabricated `debug=True` parameter
- âŒ Fixed `CapiscioSignatureError` â†’ `VerificationError`
- âœ… Rewrote configuration.md from source
- âœ… Enabled mkdocstrings for auto-generated API reference

---

## capiscio-core (COMPLETE âœ…)

### Source Files Audited

```
capiscio-core/
â”œâ”€â”€ cmd/capiscio/
â”‚   â”œâ”€â”€ main.go          # Root command, version âœ…
â”‚   â”œâ”€â”€ validate.go      # validate command âœ…
â”‚   â”œâ”€â”€ key.go           # key gen command âœ…
â”‚   â”œâ”€â”€ badge.go         # badge issue/verify/keep âœ…
â”‚   â””â”€â”€ gateway.go       # gateway start âœ…
â”œâ”€â”€ pkg/
â”‚   â”œâ”€â”€ agentcard/       # Agent card parsing âœ…
â”‚   â”œâ”€â”€ scoring/         # Validation engine âœ…
â”‚   â””â”€â”€ report/          # Output formatting âœ…
â””â”€â”€ bindings/            # Language bindings
```

### CLI Commands Verified

| Command | Source File | Docs Page | Status |
|---------|-------------|-----------|--------|
| `validate` | `validate.go` | `reference/cli/index.md` | âœ… |
| `key gen` | `key.go` | `reference/cli/index.md` | âœ… |
| `badge issue` | `badge.go` | `reference/cli/index.md` | âœ… |
| `badge verify` | `badge.go` | `reference/cli/index.md` | âœ… |
| `badge keep` | `badge.go` | `reference/cli/index.md` | âœ… |
| `gateway start` | `gateway.go` | `reference/cli/index.md` | âœ… |

### Auto-Generated Docs

- **Go API Reference**: `reference/go-api.md` (1,239 lines)
- **Generated by**: `gomarkdoc ./pkg/...`
- **Regenerate**: `cd capiscio-core && ~/go/bin/gomarkdoc ./pkg/... > ../capiscio-docs/docs/reference/go-api.md`

---

## capiscio-node (COMPLETE âœ…)

### Architecture Decision (2025-12-01)
- **Type:** npm CLI wrapper (NOT a TypeScript validation library)
- **CLI Command:** `capiscio validate ...`
- **How it works:** Spawns `capiscio-core` Go binary via `execa()` with `stdio: 'inherit'`
- **A2AValidator class:** Legacy export, NOT used by CLI, NOT tested, NOT supported

### Documentation Changes Made
1. âŒ **Deleted** `reference/api.md` - TypeScript API is unsupported legacy code
2. âŒ **Deleted** `reference/architecture.md` - Internal implementation details
3. âœ… **Rewrote** `index.md` - Clarified as "npm distribution of capiscio-core"
4. âœ… **Rewrote** `reference/cli.md` - Verified flags from Go source
5. âœ… **Rewrote** `guides/programmatic-usage.md` - Shows spawning CLI pattern
6. âœ… **Rewrote** `guides/scoring.md` - Fixed fabricated `--detailed-scores` flag
7. âœ… **Fixed** mkdocs.yml nav - Removed deleted files

### Source Files Audited

```
capiscio-node/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts         # Exports A2AValidator (legacy, unused)
â”‚   â”œâ”€â”€ cli.ts           # CLI entry point
â”‚   â””â”€â”€ commands/
â”‚       â””â”€â”€ validate.ts  # Spawns Go binary via execa()
â”œâ”€â”€ package.json         # Package name: "capiscio" (not "capiscio-cli")
â””â”€â”€ docs/                # âœ… All verified
```

### Key Findings
- Package name is `capiscio`, NOT `capiscio-cli`
- CLI spawns Go binary with `execa(binaryPath, args, { stdio: 'inherit' })`
- `A2AValidator` TypeScript class is exported but has 0 tests and is NOT used by CLI
- Programmatic usage = spawn CLI process with `--json` and parse output

---

## capiscio-python (COMPLETE âœ…)

### Architecture
- **Type:** pip CLI wrapper
- **Entry point:** `capiscio.cli:main` (defined in pyproject.toml)
- **Binary:** Downloads `capiscio-core` Go binary to user cache
- **Execution:** Uses `os.execv()` for zero-overhead process replacement

### Source Files Audited

```
capiscio-python/
â”œâ”€â”€ src/capiscio/
â”‚   â”œâ”€â”€ __init__.py      # Version only
â”‚   â”œâ”€â”€ cli.py           # Entry point, wrapper commands âœ…
â”‚   â””â”€â”€ manager.py       # Binary download/execution âœ…
â”œâ”€â”€ pyproject.toml       # Package config âœ…
â””â”€â”€ docs/                # âœ… All verified
```

### Wrapper Commands Verified

| Command | Source Location | Status |
|---------|-----------------|--------|
| `--wrapper-version` | `cli.py:24-30` | âœ… Match |
| `--wrapper-clean` | `cli.py:14-23` | âœ… Match |

### Issues Fixed

1. âŒ **Removed** fabricated `CAPISCIO_CORE_PATH` env var (not in source)
2. âŒ **Removed** fabricated `capiscio score` command (not in core)
3. âŒ **Fixed** `capiscio --version` â†’ `capiscio version` (correct command)
4. âœ… **Added** clarification that this is a wrapper, not validation logic

### Configuration Verified

| Config | pyproject.toml | Status |
|--------|----------------|--------|
| Package name | `capiscio` | âœ… |
| Python version | `>=3.10` | âœ… |
| Entry point | `capiscio = "capiscio.cli:main"` | âœ… |
| Core version | `1.0.2` (in manager.py) | âœ… |

---

## validate-a2a (COMPLETE âœ…)

### Verification Method
- Compared `action.yml` to `docs/index.md` and `README.md`
- All inputs, outputs, and defaults match exactly

### Source File: action.yml

| Component | Count | Status |
|-----------|-------|--------|
| Inputs | 6 | âœ… Match docs |
| Outputs | 7 | âœ… Match docs |
| Defaults | 6 | âœ… Match docs |

### Inputs Verified

| Input | Type | Default | Status |
|-------|------|---------|--------|
| `agent-card` | string | `./agent-card.json` | âœ… |
| `strict` | bool | `false` | âœ… |
| `test-live` | bool | `false` | âœ… |
| `skip-signature` | bool | `false` | âœ… |
| `timeout` | string | `10000` | âœ… |
| `fail-on-warnings` | bool | `false` | âœ… |

### Outputs Verified

| Output | Description | Status |
|--------|-------------|--------|
| `result` | "passed" or "failed" | âœ… |
| `compliance-score` | 0-100 | âœ… |
| `trust-score` | 0-100 | âœ… |
| `availability-score` | 0-100 or "not-tested" | âœ… |
| `production-ready` | "true" or "false" | âœ… |
| `error-count` | integer | âœ… |
| `warning-count` | integer | âœ… |

---

## Broken Links to Fix

| File | Broken Link | Should Be |
|------|-------------|-----------|
| `guides/scoring-system.md` | `../capiscio-node-js-cli/guides/scoring.md` | `../reference/cli/index.md` |
| `concepts/validation.md` | `../capiscio-node-js-cli/reference/api.md` | TBD |
| `concepts/validation.md` | `../capiscio-node-js-cli/reference/architecture.md` | TBD |
| `community/support.md` | `../capiscio-node-js-cli/index.md` | TBD |

---

## Session Log

### 2025-12-01 Session 1
- Created 50+ documentation pages
- Discovered fabricated SDK parameters
- Systematic remediation of capiscio-sdk-python docs
- Created test suite (28 tests, all pass)

### 2025-12-01 Session 2 (Current)
- Created this tracking document
- Starting capiscio-core CLI verification
- Goal: Verify all CLI commands against Go source

### 2025-12-01 Session 3 (capiscio-node + validate-a2a)
- **capiscio-node audit:** Discovered A2AValidator is legacy/untested code
- **Architecture decision:** CLI wrapper only, no TypeScript API
- **Deleted:** api.md, architecture.md (unsupported internal details)
- **Rewrote:** index.md, cli.md, programmatic-usage.md, scoring.md
- **Fixed:** Fabricated `--detailed-scores` flag removed
- **Fixed:** Wrong package name `capiscio-cli` â†’ `capiscio`
- **validate-a2a verified:** 6 inputs, 7 outputs match action.yml exactly

### 2025-12-01 Session 4 (capiscio-python)
- **Audited** cli.py, manager.py, pyproject.toml
- **Fixed:** Removed fabricated `CAPISCIO_CORE_PATH` env var
- **Fixed:** Removed fabricated `capiscio score` command from README
- **Fixed:** `capiscio --version` â†’ `capiscio version`
- **Updated:** index.md, commands.md with accurate info
- **ALL PRODUCTS NOW VERIFIED âœ…**

---

## Next Steps

1. [x] Create tracking document
2. [x] Audit `validate.go` flags vs docs
3. [x] Audit `key.go` flags vs docs
4. [x] Audit `badge.go` flags vs docs
5. [x] Audit `gateway.go` flags vs docs
6. [x] Generate Go API reference with gomarkdoc
7. [x] Rewrite CLI reference with verified flags
8. [x] Create badge recipes (issue, verify, keep)
9. [x] Create gateway setup recipe
10. [x] Final CLI verification (all 28 flags match source)
11. [x] Verify capiscio-node docs (CLI wrapper only)
12. [x] Verify validate-a2a GitHub Action docs
13. [x] Verify capiscio-python docs
14. [ ] Fix broken links
15. [ ] Build and test docs site

---

## Verification Summary

**Overall Confidence Level: 95%**

### Products Verified

| Product | Method | Status |
|---------|--------|--------|
| capiscio-sdk-python | 28 pytest tests | âœ… |
| capiscio-core | Source code audit | âœ… |
| capiscio-node | Source code audit | âœ… |
| capiscio-python | Source code audit | âœ… |
| validate-a2a | action.yml audit | âœ… |

### CLI Flags Verified (2025-12-01)

| Command | Flags | Status |
|---------|-------|--------|
| `validate` | 8 (+ 1 deprecated) | âœ… Match |
| `key gen` | 2 | âœ… Match |
| `badge issue` | 5 | âœ… Match |
| `badge verify` | 1 | âœ… Match |
| `badge keep` | 8 | âœ… Match |
| `gateway start` | 4 | âœ… Match |
| **Total** | **28 flags** | âœ… |

### Configuration Reference Verified

| Config Class | Fields | Status |
|--------------|--------|--------|
| `SimpleGuard` | 2 params | âœ… Match `simple_guard.py` |
| `SecurityConfig` | 6 fields + 4 presets | âœ… Match `config.py` |
| `DownstreamConfig` | 6 fields | âœ… Match `config.py` |
| `UpstreamConfig` | 6 fields | âœ… Match `config.py` |
| Environment vars | 10 vars | âœ… Match `from_env()` |
